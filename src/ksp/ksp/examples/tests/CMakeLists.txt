add_executable(run_ksp_ksp_tests_3 ex3.c)
target_link_libraries(run_ksp_ksp_tests_3 petsc)
ADDTEST(ksp_ksp_tests_3_np1_1 1 run_ksp_ksp_tests_3 output/ex3_1.out "-pc_type jacobi -ksp_monitor_short -m 5 -ksp_gmres_cgs_refinement_type refine_always ")
ADDTEST(ksp_ksp_tests_3_np2_2 2 run_ksp_ksp_tests_3 output/ex3_2.out "-pc_type jacobi -ksp_monitor_short -m 5 -ksp_gmres_cgs_refinement_type refine_always ")
ADDTEST(ksp_ksp_tests_3_np1_nocheby 1 run_ksp_ksp_tests_3 output/ex3_nocheby.out "-ksp_est_view ")
ADDTEST(ksp_ksp_tests_3_np1_chebynoest 1 run_ksp_ksp_tests_3 output/ex3_chebynoest.out "-ksp_est_view -ksp_type chebyshev -ksp_chebyshev_eigenvalues 0.1,1.0 ")
ADDTEST(ksp_ksp_tests_3_np1_chebyest 1 run_ksp_ksp_tests_3 output/ex3_chebyest.out "-ksp_est_view -ksp_type chebyshev -ksp_chebyshev_esteig ")
add_executable(run_ksp_ksp_tests_4 ex4.c)
target_link_libraries(run_ksp_ksp_tests_4 petsc)
ADDTEST(ksp_ksp_tests_4_np1_1 1 run_ksp_ksp_tests_4 output/ex4_1.out "-ksp_monitor_short -m 5 -pc_type jacobi -ksp_gmres_cgs_refinement_type refine_always ")
add_executable(run_ksp_ksp_tests_5f ex5f.F)
target_link_libraries(run_ksp_ksp_tests_5f petsc)
ADDTEST(ksp_ksp_tests_5f_np1_1 1 run_ksp_ksp_tests_5f output/ex5f_1.out "-ksp_monitor_short ")
add_executable(run_ksp_ksp_tests_6 ex6.c)
target_link_libraries(run_ksp_ksp_tests_6 petsc)
ADDTEST(ksp_ksp_tests_6_np1_1 1 run_ksp_ksp_tests_6 output/ex6_1.out "-ksp_type preonly  -pc_type lu -options_left no    -f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/arco1 ")
ADDTEST(ksp_ksp_tests_6_np1_2 1 run_ksp_ksp_tests_6 output/ex6_2.out "-sub_pc_type ilu -options_left no    -f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/arco1    -ksp_gmres_restart 100 -ksp_gmres_cgs_refinement_type refine_always -sub_ksp_type preonly -pc_type bjacobi    -pc_bjacobi_blocks 8 -sub_pc_factor_in_place -ksp_monitor_short    ")
add_executable(run_ksp_ksp_tests_11 ex11.c)
target_link_libraries(run_ksp_ksp_tests_11 petsc)
ADDTEST(ksp_ksp_tests_11_np1_1 1 run_ksp_ksp_tests_11 output/ex11_1.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/underworld32.gz                 -fc_ksp_view                 -fc_ksp_monitor_short                 -fc_ksp_type fgmres                 -fc_ksp_rtol 1.0e-10                 -fc_ksp_max_it 4000                 -fc_ksp_diagonal_scale                 -fc_pc_type fieldsplit         -fc_pc_fieldsplit_type SCHUR -fc_pc_fieldsplit_schur_fact_type UPPER                 -fc_fieldsplit_velocity_ksp_type cg                 -fc_fieldsplit_velocity_pc_type cholesky                 -fc_fieldsplit_velocity_pc_factor_mat_ordering_type nd                 -fc_fieldsplit_pressure_ksp_max_it 100                 -fc_fieldsplit_pressure_ksp_constant_null_space                 -fc_fieldsplit_pressure_ksp_monitor_short -fc_fieldsplit_pressure_pc_type lsc -fc_fieldsplit_pressure_lsc_ksp_type cg -fc_fieldsplit_pressure_lsc_ksp_max_it 100 -fc_fieldsplit_pressure_lsc_ksp_constant_null_space -fc_fieldsplit_pressure_lsc_ksp_converged_reason -fc_fieldsplit_pressure_lsc_pc_type icc                  ")
ADDTEST(ksp_ksp_tests_11_np4_2 4 run_ksp_ksp_tests_11 output/ex11_2.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/underworld32.gz                 -fc_ksp_view                 -fc_ksp_monitor_short                 -fc_ksp_type fgmres                 -fc_ksp_rtol 1.0e-10                 -fc_ksp_max_it 4000                 -fc_ksp_diagonal_scale                 -fc_pc_type fieldsplit                 -fc_pc_fieldsplit_type SCHUR                 -fc_pc_fieldsplit_schur_fact_type UPPER                 -fc_fieldsplit_velocity_ksp_type cg                 -fc_fieldsplit_velocity_ksp_rtol 1.0e-6                 -fc_fieldsplit_velocity_pc_type bjacobi                 -fc_fieldsplit_velocity_sub_pc_type cholesky                 -fc_fieldsplit_velocity_sub_pc_factor_mat_ordering_type nd                 -fc_fieldsplit_pressure_ksp_type fgmres                 -fc_fieldsplit_pressure_ksp_constant_null_space                 -fc_fieldsplit_pressure_ksp_monitor_short                 -fc_fieldsplit_pressure_pc_type lsc                 -fc_fieldsplit_pressure_lsc_ksp_type cg                 -fc_fieldsplit_pressure_lsc_ksp_rtol 1.0e-2                 -fc_fieldsplit_pressure_lsc_ksp_constant_null_space                 -fc_fieldsplit_pressure_lsc_ksp_converged_reason                 -fc_fieldsplit_pressure_lsc_pc_type bjacobi                 -fc_fieldsplit_pressure_lsc_sub_pc_type icc                  ")
add_executable(run_ksp_ksp_tests_12f ex12f.F)
target_link_libraries(run_ksp_ksp_tests_12f petsc)
ADDTEST(ksp_ksp_tests_12f_np1_1 1 run_ksp_ksp_tests_12f output/ex12f_1.out " -f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/arco1 -options_left no ")
add_executable(run_ksp_ksp_tests_16f ex16f.F)
target_link_libraries(run_ksp_ksp_tests_16f petsc)
ADDTEST(ksp_ksp_tests_16f_np1_1 1 run_ksp_ksp_tests_16f output/ex16f_1.out "  -f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/arco1 -options_left no")
add_executable(run_ksp_ksp_tests_19 ex19.c)
target_link_libraries(run_ksp_ksp_tests_19 petsc)
ADDTEST(ksp_ksp_tests_19_np1_1 1 run_ksp_ksp_tests_19 output/ex19_1.out "-ksp_gmres_cgs_refinement_type refine_always -pc_type jacobi -ksp_monitor_short -ksp_type gmres  ")
ADDTEST(ksp_ksp_tests_19_np3_2 3 run_ksp_ksp_tests_19 output/ex19_2.out "-ksp_monitor_short ")
add_executable(run_ksp_ksp_tests_21 ex21.c)
target_link_libraries(run_ksp_ksp_tests_21 petsc)
ADDTEST(ksp_ksp_tests_21_np1_1 1 run_ksp_ksp_tests_21 output/ex21_1.out "")
ADDTEST(ksp_ksp_tests_21_np2_2 2 run_ksp_ksp_tests_21 output/ex21_2.out "")
ADDTEST(ksp_ksp_tests_21_np3_3 3 run_ksp_ksp_tests_21 output/ex21_3.out "")
add_executable(run_ksp_ksp_tests_22 ex22.c)
target_link_libraries(run_ksp_ksp_tests_22 petsc)
ADDTEST(ksp_ksp_tests_22_np1_1 1 run_ksp_ksp_tests_22 output/ex22_1.out " ")
ADDTEST(ksp_ksp_tests_22_np2_2 2 run_ksp_ksp_tests_22 output/ex22_2.out " ")
add_executable(run_ksp_ksp_tests_24 ex24.c)
target_link_libraries(run_ksp_ksp_tests_24 petsc)
ADDTEST(ksp_ksp_tests_24_np1_1 1 run_ksp_ksp_tests_24 output/ex24_1.out "-pc_type icc -mat_type seqsbaij -mat_ignore_lower_triangular ")
ADDTEST(ksp_ksp_tests_24_np1_2 1 run_ksp_ksp_tests_24 output/ex24_2.out "-pc_type icc -pc_factor_levels 2  -mat_type seqsbaij -mat_ignore_lower_triangular ")
ADDTEST(ksp_ksp_tests_24_np2_3 2 run_ksp_ksp_tests_24 output/ex24_3.out "-pc_type bjacobi -sub_pc_type icc  -mat_type mpisbaij -mat_ignore_lower_triangular ")
ADDTEST(ksp_ksp_tests_24_np2_4 2 run_ksp_ksp_tests_24 output/ex24_4.out "-pc_type bjacobi -sub_pc_type icc -sub_pc_factor_levels 1 -mat_type mpisbaij -mat_ignore_lower_triangular ")
add_executable(run_ksp_ksp_tests_25 ex25.c)
target_link_libraries(run_ksp_ksp_tests_25 petsc)
ADDTEST(ksp_ksp_tests_25_np1_1 1 run_ksp_ksp_tests_25 output/ex25_1.out "-fload ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/indefinite/afiro ")
ADDTEST(ksp_ksp_tests_25_np1_2 1 run_ksp_ksp_tests_25 output/ex25_2.out "-fload ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/indefinite/afiro -pc_type jacobi -pc_jacobi_type rowmax ")
add_executable(run_ksp_ksp_tests_26 ex26.c)
target_link_libraries(run_ksp_ksp_tests_26 petsc)
ADDTEST(ksp_ksp_tests_26_np1_1 1 run_ksp_ksp_tests_26 output/ex26_1.out "-ksp_monitor_short ")
ADDTEST(ksp_ksp_tests_26_np3_2 3 run_ksp_ksp_tests_26 output/ex26_2.out "-ksp_monitor_short ")
add_executable(run_ksp_ksp_tests_27 ex27.c)
target_link_libraries(run_ksp_ksp_tests_27 petsc)
ADDTEST(ksp_ksp_tests_27_np1 1 run_ksp_ksp_tests_27 output/ex27.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small ")
add_executable(run_ksp_ksp_tests_28 ex28.c)
target_link_libraries(run_ksp_ksp_tests_28 petsc)
ADDTEST(ksp_ksp_tests_28_np3 3 run_ksp_ksp_tests_28 output/ex28.out "")
ADDTEST(ksp_ksp_tests_28_np3_v1 3 run_ksp_ksp_tests_28 output/ex28_2.out "-procedural -pc_redundant_number 3 -redundant_ksp_type gmres -redundant_pc_type bjacobi ")
ADDTEST(ksp_ksp_tests_28_np5 5 run_ksp_ksp_tests_28 output/ex28.out "-procedural -pc_redundant_number 3 -redundant_ksp_type gmres -redundant_pc_type bjacobi ")
add_executable(run_ksp_ksp_tests_30 ex30.c)
target_link_libraries(run_ksp_ksp_tests_30 petsc)
ADDTEST(ksp_ksp_tests_30_np1 1 run_ksp_ksp_tests_30 output/ex30.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -ksp_type preonly -pc_type ilu -pc_factor_mat_ordering_type natural -num_numfac 2 -pc_factor_reuse_fill ")
ADDTEST(ksp_ksp_tests_30_np1_v1 1 run_ksp_ksp_tests_30 output/ex30_2.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/arco1 -mat_type baij -matload_block_size 3 -ksp_type preonly -pc_type ilu -pc_factor_mat_ordering_type natural -num_numfac 2 ")
add_executable(run_ksp_ksp_tests_31 ex31.c)
target_link_libraries(run_ksp_ksp_tests_31 petsc)
ADDTEST(ksp_ksp_tests_31_np3 3 run_ksp_ksp_tests_31 output/ex31.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -partition ")
add_executable(run_ksp_ksp_tests_32 ex32.c)
target_link_libraries(run_ksp_ksp_tests_32 petsc)
foreach(i 1 2 3 4 5 6 7 8)
foreach(ordering natural nd)
foreach(flevels 0 1 2 3)
ADDTEST(ksp_ksp_tests_32_np1_i-${i}_ordering-${ordering}_flevels-${flevels} 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof ${i} -pc_type ilu -pc_factor_mat_ordering_type ${ordering} -mat_type aij $$simtype -pc_factor_levels ${flevels} ")
endforeach()
endforeach()
endforeach()
foreach(i 1 2 3 4 5 6 7 8)
foreach(ordering natural nd)
foreach(flevels 0 1 2 3)
ADDTEST(ksp_ksp_tests_32_np1_v1_i-${i}_ordering-${ordering}_flevels-${flevels} 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof ${i} -pc_type ilu -pc_factor_mat_ordering_type ${ordering} -mat_type baij $$simtype -pc_factor_levels ${flevels} ")
endforeach()
endforeach()
endforeach()
foreach(i 1 2 3 4 5 6 7 8)
foreach(ordering natural nd)
ADDTEST(ksp_ksp_tests_32_np1_v2_i-${i}_ordering-${ordering} 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof ${i} -pc_type lu -pc_factor_mat_ordering_type ${ordering} -mat_type aij $$simtype ")
endforeach()
endforeach()
foreach(i 1 2 3 4 5 6 7 8)
foreach(ordering natural nd)
ADDTEST(ksp_ksp_tests_32_np1_v3_i-${i}_ordering-${ordering} 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof ${i} -pc_type lu -pc_factor_mat_ordering_type ${ordering} -mat_type baij $$simtype ")
endforeach()
endforeach()
foreach(ordering natural nd)
foreach(flevels 0 1 2 3)
ADDTEST(ksp_ksp_tests_32_np1_v4_ordering-${ordering}_flevels-${flevels} 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -pc_type icc -ksp_type cg -pc_factor_mat_ordering_type ${ordering} -mat_type aij -pc_factor_levels ${flevels} ")
endforeach()
endforeach()
foreach(ordering natural nd)
ADDTEST(ksp_ksp_tests_32_np1_v5_ordering-${ordering} 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -pc_type cholesky -ksp_type cg -pc_factor_mat_ordering_type ${ordering} -mat_type aij ")
endforeach()
ADDTEST(ksp_ksp_tests_32_np1_v6 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -pc_type icc -test_sbaij1 ")
ADDTEST(ksp_ksp_tests_32_np1_v7 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -mat_type aij -pc_type icc -pc_factor_mat_ordering_type natural ")
ADDTEST(ksp_ksp_tests_32_np1_v8 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -mat_type aij -ksp_type cg -pc_type icc -pc_factor_mat_ordering_type natural -pc_factor_levels 1 ")
ADDTEST(ksp_ksp_tests_32_np1_v9 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -mat_type aij -ksp_type cg -pc_type icc -pc_factor_mat_ordering_type natural -pc_factor_levels 10 ")
ADDTEST(ksp_ksp_tests_32_np1_v10 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -dof 1 -mat_type aij -pc_type cholesky -pc_factor_mat_ordering_type natural ")
ADDTEST(ksp_ksp_tests_32_np1_v11 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 2 -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v12 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 2 -pc_factor_mat_ordering_type nd -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v13 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 3 -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v14 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 3 -pc_factor_mat_ordering_type nd -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v15 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 4 -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v16 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 4 -pc_factor_mat_ordering_type nd -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v17 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 5 -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v18 1 run_ksp_ksp_tests_32 FALSE "-ksp_monitor_short -mat_type aij -dof 5 -pc_factor_mat_ordering_type nd -mat_no_inode ")
ADDTEST(ksp_ksp_tests_32_np1_v19 1 run_ksp_ksp_tests_32 output/ex32_cholmod.out "-ksp_monitor_short -dm_mat_type aij -pc_factor_mat_solver_package cholmod -ksp_monitor_short -pc_type cholesky -ksp_view ")
ADDTEST(ksp_ksp_tests_32_np1_v20 1 run_ksp_ksp_tests_32 output/ex32_cholmod_sbaij.out "-ksp_monitor_short -dm_mat_type sbaij -pc_factor_mat_solver_package cholmod -ksp_monitor_short -pc_type cholesky -ksp_view ")
add_executable(run_ksp_ksp_tests_37 ex37.c)
target_link_libraries(run_ksp_ksp_tests_37 petsc)
ADDTEST(ksp_ksp_tests_37_np1 1 run_ksp_ksp_tests_37 output/ex37.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -nsubcomm 1 ")
ADDTEST(ksp_ksp_tests_37_np4 4 run_ksp_ksp_tests_37 output/ex37.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -nsubcomm 2 ")
ADDTEST(ksp_ksp_tests_37_np4_v1 4 run_ksp_ksp_tests_37 output/ex37.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -nsubcomm 2 -subcomm_type 0 ")
ADDTEST(ksp_ksp_tests_37_np4_v2 4 run_ksp_ksp_tests_37 output/ex37.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -nsubcomm 2 -subcomm_type 1 ")
ADDTEST(ksp_ksp_tests_37_np4_v3 4 run_ksp_ksp_tests_37 output/ex37.out "-f ${PETSc_SOURCE_DIR}/share/petsc/datafiles/matrices/small -nsubcomm 2 -subcomm_type 2 ")
add_executable(run_ksp_ksp_tests_38 ex38.c)
target_link_libraries(run_ksp_ksp_tests_38 petsc)
ADDTEST(ksp_ksp_tests_38_np8 8 run_ksp_ksp_tests_38 output/ex38.out "-ksp_type fbcgs -ksp_rtol 1.e-6 -sub_ksp_type bcgs -sub_ksp_rtol 1.e-3 -pc_type bjacobi -ksp_converged_reason -n1 64 -n2 64 ")
add_executable(run_ksp_ksp_tests_39 ex39.c)
target_link_libraries(run_ksp_ksp_tests_39 petsc)
ADDTEST(ksp_ksp_tests_39_np8 8 run_ksp_ksp_tests_39 output/ex39.out "-ksp_type fbcgs -ksp_rtol 1.e-6 -sub_ksp_type bcgs -sub_ksp_rtol 1.e-3 -pc_type bjacobi -ksp_converged_reason -n1 32 -n2 32 -n3 32 ")
ADDTEST(ksp_ksp_tests_39_np8_v1 8 run_ksp_ksp_tests_39 output/ex39.out "-ksp_type fbcgsr -ksp_rtol 1.e-6 -sub_ksp_type bcgs -sub_ksp_rtol 1.e-3 -pc_type bjacobi -ksp_converged_reason -n1 32 -n2 32 -n3 32 ")
add_executable(run_ksp_ksp_tests_42 ex42.c)
target_link_libraries(run_ksp_ksp_tests_42 petsc)
ADDTEST(ksp_ksp_tests_42_np1 1 run_ksp_ksp_tests_42 output/ex42.out "-ksp_type minres -pc_type none -ksp_converged_reason ")
ADDTEST(ksp_ksp_tests_42_np3 3 run_ksp_ksp_tests_42 output/ex42_2.out "-ksp_type minres -pc_type none -ksp_converged_reason ")
add_executable(run_ksp_ksp_tests_44 ex44.c)
target_link_libraries(run_ksp_ksp_tests_44 petsc)
set(EX44RICH "-ksp_type richardson -ksp_max_it 1 -ksp_final_residual -pc_type sor")
foreach(mt aij baij dense)
if (mt STREQUAL baij)
set(bss 1 2 3 4 5 6 7 15)
else ()
set(bss 1)
endif ()
foreach(bs ${bss})
ADDTEST(ksp_ksp_tests_44_np1_mt-${mt}-${bs} 1 run_ksp_ksp_tests_44 output/ex44_aij_zero.out "${EX44RICH} -mat_type ${mt} -mat_block_size ${bs} ")
endforeach()
endforeach()
set(EX44RICHNONZ -ksp_initial_guess_nonzero)
foreach(mt aij baij)#dense removed due to failure!!!!
if (mt STREQUAL baij)
set(bss 1 2 3 4 5 6 7 15)
else ()
set(bss 1)
endif ()
foreach(bs ${bss})
ADDTEST(ksp_ksp_tests_44_np1_v1_mt-${mt}-${bs} 1 run_ksp_ksp_tests_44 output/ex44_aij_nonz.out "${EX44RICHNONZ} -mat_type ${mt} -mat_block_size ${bs} ")
endforeach()
endforeach()
add_executable(run_ksp_ksp_tests_45 ex45.c)
target_link_libraries(run_ksp_ksp_tests_45 petsc)
ADDTEST(ksp_ksp_tests_45_np1 1 run_ksp_ksp_tests_45 output/ex45_1.out " ")
